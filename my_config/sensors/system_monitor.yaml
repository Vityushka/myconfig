# ############################################################################
# Hardware sensors Z9PA
# ############################################################################
  - platform: ssh
    name: root_device
    host: 192.168.1.14
    scan_interval: 3600
    username: !secret ssh_user
    password: !secret ssh_pass
    command: "mount|grep ' / '|cut -d' ' -f 1"
    value_template: >-
     {%- set line = value.split("\r\n") -%}
      {{ line[1] }}
    unit_of_measurement: ''

# ############################################################################
# Hardware sensors Z9PA
# ############################################################################
  - platform: cpuspeed

  - platform: systemmonitor
    resources:
      - type: last_boot
      - type: memory_use_percent
      - type: processor_use
      - type: load_1m
      - type: load_5m
      - type: load_15m
      - type: disk_use_percent
        arg: /
  - platform: command_line
    name: CPU Temperature
    command: "cat /sys/class/thermal/thermal_zone0/temp"
    unit_of_measurement: "°C"
    value_template: '{{ value | multiply(0.001) | round(0) }}'


  #- platform: command_line
  #  name: GPU Temperature
  #  command: "/opt/vc/bin/vcgencmd measure_temp"
  #  unit_of_measurement: "°C"
  #  value_template: '{{ value | replace("temp=", "") | replace("''C", "") | round(0) }}'


# ############################################################################
# Hardware sensors (Zero2mb) - MQTT
# ############################################################################
#  - platform: mqtt
#    name: "Zero2mb CPU Usage"
#    state_topic: "zero2mb/cpu_percent"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:speedometer
#    
#  - platform: mqtt
#    name: "Zero2mb CPU Temp"
#    state_topic: "zero2mb/sensors_temperatures/cpu-thermal"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '°C'
#    icon: mdi:thermometer
#    
#  - platform: mqtt
#    name: "Zero2mb RAM Usage"
#    state_topic: "zero2mb/virtual_memory/percent"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:memory
#
#  - platform: mqtt
#    name: "Zero2mb Disk Usage"
#    state_topic: "zero2mb/disk_usage/percent/|"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:chip


# ############################################################################
# Hardware sensors (Zero2mqtt) - MQTT
# ############################################################################
#  - platform: mqtt
#    name: "Zero2mqtt CPU Usage"
#    state_topic: "zero2mqtt/cpu_percent"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:speedometer
#    
#  - platform: mqtt
#    name: "Zero2mqtt CPU Temp"
#    state_topic: "zero2mqtt/sensors_temperatures/cpu-thermal"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '°C'
#    icon: mdi:thermometer
#    
#  - platform: mqtt
#    name: "Zero2mqtt RAM Usage"
#    state_topic: "zero2mqtt/virtual_memory/percent"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:memory#
#
#  - platform: mqtt
#    name: "Zero2mqtt Disk Usage"
#    state_topic: "zero2mqtt/disk_usage/percent/|"
#    value_template: '{{ value| round(0)}}'
#    unit_of_measurement: '%'
#    icon: mdi:chip

# ############################################################################
# Hardware sensors (RPI) - MQTT
# ############################################################################
  - platform: mqtt
    name: "RPI CPU Usage"
    state_topic: "rpi/cpu_percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:speedometer
    
  - platform: mqtt
    name: "RPI CPU Temp"
    state_topic: "rpi/sensors_temperatures/cpu-thermal"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer
    
  - platform: mqtt
    name: "RPI RAM Usage"
    state_topic: "rpi/virtual_memory/percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:memory

  - platform: mqtt
    name: "RPI SSD Usage"
    state_topic: "rpi/disk_usage/percent/|"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:chip

# ############################################################################
# Hardware sensors (j3455) - MQTT
# ############################################################################
  - platform: mqtt
    name: "j3455 CPU Usage"
    state_topic: "j3455/cpu_percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:speedometer
    
  - platform: mqtt
    name: "j3455 CPU Temp"
    state_topic: "j3455/sensors_temperatures/coretemp/0"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer
    
  - platform: mqtt
    name: "j3455 RAM Usage"
    state_topic: "j3455/virtual_memory/percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:memory

  - platform: mqtt
    name: "j3455 SSD Usage"
    state_topic: "j3455/disk_usage/percent/|"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:chip


# ############################################################################
# Hardware sensors (IPMI) - MQTT
# ############################################################################

  - platform: mqtt
    name: "IPMI CPU1 Temp"
    state_topic: "ubuntu/ipmi/cpu1_temp"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer

  - platform: mqtt
    name: "IPMI CPU2 Temp"
    state_topic: "ubuntu/ipmi/cpu2_temp"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer

  - platform: mqtt
    name: "IPMI TR1 Temp"
    state_topic: "ubuntu/ipmi/tr1_temp"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer

  - platform: mqtt
    name: "IPMI TR2 Temp"
    state_topic: "ubuntu/ipmi/tr2_temp"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer

  - platform: mqtt
    name: "IPMI CPU Fan1"
    state_topic: "ubuntu/ipmi/cpu_fan1"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI CPU Fan2"
    state_topic: "ubuntu/ipmi/cpu_fan2"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Rear Fan 1"
    state_topic: "ubuntu/ipmi/rear_fan1"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Rear Fan 2"
    state_topic: "ubuntu/ipmi/rear_fan2"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Front Fan 1"
    state_topic: "ubuntu/ipmi/frnt_fan1"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Front Fan 2"
    state_topic: "ubuntu/ipmi/frnt_fan2"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Front Fan 3"
    state_topic: "ubuntu/ipmi/frnt_fan3"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan

  - platform: mqtt
    name: "IPMI Front Fan 4"
    state_topic: "ubuntu/ipmi/frnt_fan4"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: 'RPM'
    icon: mdi:fan


# ############################################################################
# Hardware sensors (Ubuntu) - MQTT
# ############################################################################

  - platform: mqtt
    name: "Ubuntu CPU Usage"
    state_topic: "ubuntu/cpu_percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:speedometer
    
  - platform: mqtt
    name: "Ubuntu CPU Temp"
    state_topic: "ubuntu/sensors_temperatures/coretemp/0"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '°C'
    icon: mdi:thermometer
    
  - platform: mqtt
    name: "Ubuntu RAM Usage"
    state_topic: "ubuntu/virtual_memory/percent"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:memory

  - platform: mqtt
    name: "Ubuntu SSD Usage"
    state_topic: "ubuntu/disk_usage/percent/|"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:chip

  - platform: mqtt
    name: "Ubuntu Purple Usage"
    state_topic: "ubuntu/disk_usage/percent/|mnt/Purple"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:harddisk

  - platform: mqtt
    name: "Ubuntu Media Usage"
    state_topic: "ubuntu/disk_usage/percent/|mnt/Media"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:harddisk

  - platform: mqtt
    name: "Ubuntu Storage Usage"
    state_topic: "ubuntu/disk_usage/percent/|mnt/Storage"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:harddisk

  - platform: mqtt
    name: "Ubuntu BackupDisk Usage"
    state_topic: "ubuntu/disk_usage/percent/|mnt/BackupDisk"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:harddisk

  - platform: mqtt
    name: "Ubuntu Back_2Tb Usage"
    state_topic: "ubuntu/disk_usage/percent/|mnt/Back_2Tb"
    value_template: '{{ value| round(0)}}'
    unit_of_measurement: '%'
    icon: mdi:harddisk
    
# ############################################################################
# Hardware sensors (Ubuntu) - REST
# ############################################################################
#  - platform: rest
#    name: server_SSD
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[0].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs0_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[0].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_SSD boot
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[1].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs1_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[1].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_Storage
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[2].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs2_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[2].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_Backupdisk
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[3].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs3_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[3].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_Media
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[4].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs4_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[4].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_Purple
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[5].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs5_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[5].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_TempM2
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[6].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs6_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[6].mnt_point }}'
#    scan_interval: 30

#  - platform: rest
#    name: server_Temp
#    resource: http://192.168.1.14:61208/api/3/fs
#    unit_of_measurement: "%"
#    value_template: '{{ value_json[7].percent| round(0)}}'
#    scan_interval: 30
#  - platform: rest
#    name: fs7_name
#    resource: http://192.168.1.14:61208/api/3/fs
#    value_template: '{{ value_json[7].mnt_point }}'
#    scan_interval: 30
  


#  - platform: rest
#    name: cont0_cpu_load
#    resource: http://192.168.1.14:61208/api/3/docker
#    value_template: '{{ value_json["containers"][0].cpu_percent | round(0) }}'
#    unit_of_measurement: "%"
#    scan_interval: 5
#  - platform: rest
#    name: cont0_mem_usage
#    resource: http://192.168.1.14:61208/api/3/docker
#    value_template: '{{ ( value_json["containers"][0].memory.usage / 1024 / 1024 ) | int }}'
#    unit_of_measurement: "Mb"
#    scan_interval: 5
#  - platform: rest
#    name: cont0_name
#    resource: http://192.168.1.14:61208/api/3/docker
#    value_template: '{{ value_json["containers"][0].name }}'
#    scan_interval: 30


#  - platform: rest
#    resource: http://192.168.1.14:61208/api/3/mem/percent
#    name: Ubuntu MEM Used
#    value_template: '{{ value_json.percent| round(0) }}'
#    unit_of_measurement: "%"
#    scan_interval: 10
#  - platform: rest
#    name: Ubuntu CPU Load
#    resource: http://192.168.1.14:61208/api/3/cpu/total
#    unit_of_measurement: "%"
#    value_template: '{{ value_json.total | round(0) }}'
#    scan_interval: 5
#  - platform: rest
#    name: Ubuntu CPU Temp
#    resource: http://192.168.1.14:61208/api/3/sensors
#    unit_of_measurement: "°C"
#    value_template: '{{ value_json[2].value| round(0) }}'
#    scan_interval: 5
