  ha_released_update:
    alias: HA Released version update from server
    sequence:
      service: homeassistant.update_entity
      entity_id: sensor.ha_latest_version

  ha_backup:
    alias: Manual Backup with G-Drive upload
    sequence:
     - service: hassio.snapshot_full
       data_template:
         name: auto_snap_{{states('sensor.date')}}
     - delay: 00:05:00
     - service: rest_command.google_backup 
     - delay: 00:05:00
     - service: mqtt.publish
       data_template:
         topic: "googlebackup/result"
         payload: "{{ states('sensor.google_backup_status')}}"
         retain: true

  speedtest_manual:
    alias: Speedtest
    sequence:
      - service: speedtestdotnet.speedtest

  purge_db:
    alias: Purge Main DB
    sequence:
      - service: recorder.purge
        data:
          keep_days: 1
          repack: true
  
  bottom_lock_tts:
    alias: Bottom Lock TTS
    sequence:
      - service: tts.yandextts_say
        entity_id: media_player.mpd
        data_template: 
          message: >
            {% if is_state('binary_sensor.door_window_sensor_158d0002a1a4b2','on') %}
            Н+ижний зам+ок откр+ыт!
            {% else %}
            Н+ижний зам+ок закр+ыт!
            {% endif %}

  top_lock_tts:
    alias: Top Lock TTS
    sequence:
      - service: tts.yandextts_say
        entity_id: media_player.mpd
        data_template: 
          message: >
            {% if is_state('binary_sensor.upper_lock','on') %}
            В+ерхний зам+ок откр+ыт!
            {% else %}
            В+ерхний зам+ок закр+ыт!
            {% endif %}
  
  bottom_lock_yellow_led_blink_on:
    sequence:
      - service: light.turn_off
        data:
          entity_id: light.d1_mini_domofon_yellow_led
      - service: light.turn_on
        data:
          entity_id: light.d1_mini_domofon_yellow_led
          effect: "Blink"

  bottom_lock_yellow_led_blink_off:
    sequence:
      - service: light.turn_off
        data:
          entity_id: light.d1_mini_domofon_yellow_led
  
  
  washing_machine_tts:
    alias: Washing Completed TTS
    sequence:
      - service: tts.yandextts_say
        entity_id: media_player.home_mini_k
        data_template: 
          message: >
            {% if is_state('binary_sensor.washer_b','on') %}
              
            {% else %}
            Стирка завершена! Вытащите белье пожалуйста!
            {% endif %}
            
  square_led_restart:
    alias: Square LED Restart
    sequence:
      - service: switch.turn_off
        entity_id: switch.plug_158d00020b4971
      - delay: 00:00:02
      - service: switch.turn_on
        entity_id: switch.plug_158d00020b4971
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.square_led_v  

  round_led_restart:
    alias: Round LED Restart
    sequence:
      - service: switch.turn_off
        entity_id: switch.plug_158d0002482619
      - delay: 00:00:02
      - service: switch.turn_on
        entity_id: switch.plug_158d0002482619
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb  
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb
      - delay: 00:00:01
      - service: light.turn_off
        entity_id: light.round_led_mb