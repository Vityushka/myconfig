resources:
#  - url: /local/custom-weather-card-chart.js
#    type: module
  - url: /local/camera-card.js
    type: module
    
  - url: /local/community/mini-graph-card/mini-graph-card.js
    type: module
  - url: /local/community/bar-card/bar-card.js
    type: js
  - url: /local/community/vertical-stack-in-card/vertical-stack-in-card.js
    type: js
  - url: /local/community/weather-card/weather-card.js
    type: module
  - url: /local/community/restriction-card/restriction-card.js
    type: module
  - url: /community_plugin/group-card/group-card.js
    type: module

title: Home - Main Server
views:
################################################################
# MAIN PAGE
################################################################
  - title: Main
    background: var(--background-image)
    icon: mdi:home
    columns: 4
    #badges:
    #  - person.dima
    #  - person.sandra
    #  - person.vova
    #  - person.sasha
    cards:
      #- type: custom:compact-custom-header
      # ##################################
      # Left Block
      # ##################################a
      - type: vertical-stack
        #title: Main
        cards:
          # - type: glance
          #   entities:
          #     - entity: input_boolean.sasha_tracker
          #       name: input
          #     - entity: device_tracker.sasha
          #       name: tracker
          #     - entity: person.sasha
          #       name: person
          - type: glance
            #title: Presence
            show_name: true
            show_state: true
            columns: 6
            entities:
              - entity: binary_sensor.tod_status
                name: TOD
              - entity: sensor.temperature_158d0001e8995a
                name: Temp
              - person.dima
              - person.sandra
              - person.vova
              - entity: person.sasha
                name: Sasha
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.sasha_tracker
          - type: map
            aspect_ratio: '16x9'
            default_zoom: 16
            entities: 
              - person.dima
              - person.sandra
              - person.vova
          #- type: custom:simple-weather-card
          #  entity: weather.yandex_weather
          - type: custom:weather-card
            #entity: weather.dark_sky
            entity: weather.gismeteo_daily
            icons: "/local/icons/"
          #- type: custom:weather-card-chart
          #  weather: weather.dark_sky
            
          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                #title: Sytem Status
                columns: 6
                entities:
                  - entity: sensor.cpu_package_temp
                    name: CPUT
                  - entity: sensor.ipmi_fan1
                    name: FAN1
                  - entity: sensor.cpu_usage
                    name: CPU
                    icon: mdi:desktop-tower
                  - entity: sensor.ram_usage
                    name: RAM
                    icon: mdi:chip
                  #- entity: sensor.cont0_cpu_load
                  #  name: HA CPU
                  #  icon: mdi:home-assistant
                  #- entity: sensor.cont0_mem_usage
                  #  name: HA RAM
                  #  icon: mdi:chip
                    
                  #- entity: sensor.cpu_temperature
                  #  name: CPU T2
                  #- entity: sensor.ssd_space_used
                  #  name: SSD
                  #  icon: mdi:harddisk
                  #- entity: sensor.hdd_purple_space_used
                  #  name: HDD
                  #  icon: mdi:harddisk
                  - entity:  sensor.db_size
                    name: DB
                    icon: mdi:database
                  - entity: sensor.influxdb_size
                    name: InfluxDB
                    icon: mdi:database-lock
              - type: horizontal-stack
                cards:
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.ippon_hb_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 3
                      entities:
                        - entity: binary_sensor.ippon_hb_status
                          name: HB
                        - entity: sensor.ippon_hb_status_data
                          name: Status
                        - entity: sensor.ippon_hb_battery_voltage
                          name: Voltage
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.ippon_mb_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 3
                      entities:
                        - entity: binary_sensor.ippon_mb_status
                          name: MB
                        - entity: sensor.ippon_mb_status_data
                          name: Status
                        - entity: sensor.ippon_mb_battery_voltage
                          name: Voltage

          - type: glance
            columns: 8
            entities:
              - entity: media_player.home_mini_v
                name: V
              - entity: media_player.home_mini_s
                name: S
              - entity: media_player.home_mini_k
                name: K
              - entity: media_player.home_mini_mb
                name: MB
              - entity: media_player.home_mini_hb
                name: HB
              - entity: media_player.mpd
                name: MPD
              - entity: media_player.mpd_j3455
                name: MPD j3455
              - entity: media_player.mpd_rpi
                name: MPD RPI

      # ##################################
      # Center Block
      # ##################################      
      - type: vertical-stack
        #title: Security
        cards:
          - type: horizontal-stack
            #title: Camers
            cards:
              - type: 'custom:camera-card'
                entity: camera.door_hb
              - type: 'custom:camera-card'
                entity: camera.uvc_g3_flex_entrance
              - type: 'custom:camera-card'
                entity:  camera.uvc_g3_flex_hall
              - type: 'custom:camera-card'
                entity: camera.uvc_g3_flex_dixy
              - type: 'custom:camera-card'
                entity: camera.uvc_g3_flex_window
              #- type: 'custom:camera-card'
              #  entity: camera.door_hb
          - type: glance
            #title: Motion
            show_name: true
            show_state: false
            columns: 6
            entities:
              - entity: binary_sensor.esp32_domofon_motion
                name: Out
              - entity: binary_sensor.pinhole_camera_motion
                name: Pinhole
              - entity: binary_sensor.motion_sensor_158d0001e53cda
                name: MB
              - entity: binary_sensor.motion_sensor_158d000224f89f
                name: S
              - entity: binary_sensor.motion_sensor_158d000236bb94
                name: V
              #- entity: binary_sensor.motion_sensor_158d0001e05856
              - entity: binary_sensor.motion_hb
                name: HB
              - entity: binary_sensor.motion_sensor_158d0001d5995e
                name: HB Door
              - entity: binary_sensor.motion_sensor_158d0001ae9f61
                name: HS
              - entity: binary_sensor.motion_k
              #- entity: binary_sensor.motion_sensor_158d0002b4729d
                name: K
              - entity: binary_sensor.motion_sensor_158d000236bc6d
                name: B
              - entity: binary_sensor.motion_sensor_158d0001e54280
                name: T
              - entity: binary_sensor.motion_sensor_158d0001aea602
                name: St
          - type: horizontal-stack
            cards:
              - type: glance
              # title: Water Leak
                show_name: true
                show_state: true
                columns: 3
                entities:
                  - entity: binary_sensor.water_leak_sensor_158d00023297e7
                    name: K
                  - entity: binary_sensor.water_leak_sensor_158d0002373a67
                    name: B
                  - entity: binary_sensor.water_leak_sensor_158d00023684c2
                    name: T
              - type: glance
                show_name: true
                show_state: true
                entities:
          
                  - entity: binary_sensor.door_window_sensor_158d000253722b
                    name: Fridge
                  - entity: sensor.temperature_158d0002461e5b
                    name: 
                    
                  - entity: binary_sensor.door_window_sensor_158d000252acba
                    name: Freezer
                  - entity: sensor.temperature_158d000237167c
                    name: 
                   
                      
          - type: horizontal-stack
            #title: Utility
            cards:
              - type: glance
                columns: 8
                show_state: true
                entities:
                  #- entity: switch.ventilation
                  #  name: Vent K
                  #  tap_action:
                  #    action: toggle
                  - entity: binary_sensor.8266_air_valve_magnet
                    name: Vent Door
                    tap_action:
                      action: call-service
                      service: switch.toggle
                      service_data:
                        entity_id: switch.ventilation
                  - binary_sensor.toilet_usage
                  - entity: sensor.humidity_b_delta
                    name: Humidity Delta
                  - entity: switch.plug_158d0003926263
                    name: BFan B
                    icon: mdi:cached
                    tap_action:
                      action: toggle
                  - entity: switch.plug_158d0001f9ebd8
                    name: Fan B
                    icon: mdi:fan
                    tap_action:
                      action: toggle
                  - entity: switch.plug_158d0001f54f91
                    name: Fan T
                    icon: mdi:fan
                    tap_action:
                      action: toggle
                  - entity: switch.plug_158d0001f54f90
                    name: W.ON
                    tap_action:
                      action: toggle
                  - entity: switch.plug_158d00020d8679
                    name: W.OFF
                    tap_action:
                      action: toggle
          - type: glance
            show_state: false
            entities:
              - entity: switch.plug_158d000344998e
                name: Plug
              - entity: binary_sensor.breather_v
                name: Breather
                tap_action:
                  action: call-service
                  service: script.breather_toggle
              - entity: script.breather_arrow_up
                name: Up
                icon: mdi:arrow-up-bold
                tap_action:
                  action: call-service
                  service: script.breather_arrow_up
              - entity: script.breather_arrow_down
                icon: mdi:arrow-down-bold
                name: Down
                tap_action:
                  action: call-service
                  service: script.breather_arrow_down

          - type: horizontal-stack
            cards:
              - type: glance
                entities:
                  - entity: fan.humidifier2
                    name: Humi
                    tap_action:
                      action: toggle
                  - entity: sensor.humidifier_mode
                    icon: mdi:fan
                    name: Speed
                    tap_action:
                      action: call-service
                      service: script.cycle_humidifier_mode
                  - entity: sensor.humidifier_water_level
                    name: Water
              - type: glance
                entities:
                  - entity: fan.purifier2s
                    name: Puri
                    tap_action:
                      action: toggle
                  - entity: sensor.purifier_mode
                    name: Speed
                    icon: mdi:fan
                    tap_action:
                      action: call-service
                      service: script.cycle_purifier_mode
                  - entity: sensor.purifier_pm25
                    name: PM2.5
                    icon: mdi:meteor

          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                columns: 7
                entities:
                  - entity: sensor.temperature_158d0002464ec0
                    name: HB
                  - entity: sensor.temperature_158d0001e586af
                    name: K
                  - entity: sensor.temperature_158d000222c746
                    name: MB
                  - entity: sensor.temperature_158d0001e6d85a
                    name: S
                  - entity: sensor.temperature_158d0001e58714
                    name: V
                  - entity: sensor.temperature_158d00020d7c3a
                    name: B
                  - entity: sensor.temperature_158d0001e58754
                    name: T
              - type: glance
                columns: 7
                show_name: false
                show_state: true
                entities:
                  - entity: sensor.humidity_158d0002464ec0
                    name: HB
                  - entity: sensor.humidity_158d0001e586af
                    name: K
                  - entity: sensor.humidity_158d000222c746
                    name: MB
                  - entity: sensor.humidity_158d0001e6d85a
                    name: S
                  - entity: sensor.humidity_158d0001e58714
                    name: V
                  - entity: sensor.humidity_158d00020d7c3a
                    name: B
                  - entity: sensor.humidity_158d0001e58754
                    name: T
              
      # ##################################
      # Right Block
      # ##################################
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
#              - type: entity-button
#                name: All
#                entity: light.my_lights
#                hold_action: none
#                tap_action:
#                  action: call-service
#                  service: homeassistant.turn_off
#                  entity_id: group.devices_to_turnoff
              - type: glance
                columns: 8
                entities:
                  #- binary_sensor.door_window_sensor_158d0003262ba8
                  - entity: binary_sensor.doorbell
                    name: Doorbell
                  - entity: binary_sensor.doorbell_mute
                    name: Mute
                    tap_action:
                      action: call-service
                      service: script.doorbell_mute
                  - entity: binary_sensor.esp32_domofon_incomingcall
                    name: Call
#                  - entity: switch.esp32_domofon_phone
#                    name: PickupSw
#                    tap_action:
#                      action: toggle
#                  - entity: switch.esp32_domofon_relay3
#                    name: OpenSw
#                    icon: mdi:door-open
#                    tap_action:
#                      action: toggle
                  - entity: script.domofon_open_door
                    name: Open
                    icon: mdi:lock-open-outline
                    tap_action:
                      action: call-service
                      service: script.domofon_open_door
                  - entity: binary_sensor.domofon_mute
                    name: Mute
                    tap_action:
                      action: call-service
                      service: script.domofon_mute_toggle
                  - entity: binary_sensor.domofon_auto_open
                    name: AOpen
                    tap_action:
                      action: call-service
                      service: script.domofon_auto_open_toggle
                  - entity: binary_sensor.domofon_auto_open_once
                    name: AOpen 1
                    tap_action:
                      action: call-service
                      service: script.domofon_auto_open_once_toggle
                  - entity: binary_sensor.domofon_ignore
                    name: Ignore
                    tap_action:
                      action: call-service
                      service: script.domofon_ignore_toggle

          - type: glance
            #title: Lights
            show_name: true
            show_state: false
            columns: 7
            entities:
              #- entity: group.devices_to_turnoff
              #  name: All
              #  icon: mdi:lightbulb
              #  hold_action: none
              #  tap_action:
              #    action: call-service
              #    service: homeassistant.turn_off
              #    service_data:
              #      entity_id: group.devices_to_turnoff
                
              - entity: light.led_strip_hb
                name: HB
                tap_action:
                  action: toggle
                icon: mdi:led-strip
              - entity: switch.wall_switch_left_158d000223921b
                name: Entrance
                tap_action:
                  action: toggle
                icon: mdi:ceiling-light
              - entity: switch.wall_switch_right_158d000253f04a
                name: Fridge
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
              
              - entity: light.square_led_v
                name: Main V
                icon: mdi:card
                tap_action:
                  action: toggle
              - entity: light.led_color_v
                name: Desk V
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle
              
              - entity: light.round_led_mb
                name: Main MB
                icon: mdi:circle
                tap_action:
                  action: toggle
              - entity: light.philips_e27_mb
                name: Desk MB
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle
              
              
              - entity: switch.wall_switch_left_158d0002a36433
                name: Main S
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
              - entity: light.philips_e27_s
                name: Desk S
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle
              - entity: light.led_color_k
                name: Desk 2 S
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle
              #- entity: switch.wall_switch_right_158d0002a36433
              #  name: S Desk
              #  icon: mdi:light-switch
              #  tap_action:
              #    action: toggle
                  
              - entity: switch.wall_switch_left_158d0002a36e26
                name: Main HS
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
              - entity: switch.plug_158d0001f5501f
                name: Night HS
                icon: mdi:candle
                tap_action:
                  action: toggle
              
              - entity: switch.wall_switch_right_158d0002a36e26
                name: Bath
                icon: mdi:spotlight
                tap_action:
                  action: toggle
              - entity: switch.wall_switch_left_158d0002a36f7f
                name: Toilet
                icon: mdi:spotlight
                tap_action:
                  action: toggle
                  
              - entity: switch.wall_switch_right_158d0002a36f7f
                name: Main K
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000216528c
                name: Night K
                icon: mdi:candle
                tap_action:
                  action: toggle
              - entity: light.bedside_mb
                name: Lava K
                icon: mdi:lava-lamp
                tap_action:
                  action: toggle
              - entity: switch.wall_switch_left_158d0002a365df
                name: L
                tap_action:
                  action: toggle
              - entity: switch.wall_switch_right_158d0002a365df
                name: R
                tap_action:
                  action: toggle
              - entity: switch.d1_hood_light
                name: Hood
                tap_action:
                  action: toggle


              - entity: switch.wall_switch_158d000248bf53
                name: Main St
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
          
          - type: glance
            show_state: false
            columns: 8
            entities:
              - entity: switch.d1_hood_fan1
                name: Hood
                icon: mdi:fan
                tap_action:
                  action: toggle
              
              - entity: binary_sensor.washer_b
                name: Washer
                icon: mdi:washing-machine
              - entity: binary_sensor.kettle_k
                name: Kettle
              - entity: binary_sensor.microwave_k
                name: MW
              - entity: binary_sensor.tv_k
                name: Samsung
                tap_action:
                  action: call-service
                  service: script.tv_k_toggle
              - entity: binary_sensor.tv_box
                name: TV Box
                icon: mdi:youtube-tv
                tap_action:
                  action: call-service
                  service: script.tv_box_k_toggle
              - entity: binary_sensor.tv_v
                name: Sony
                tap_action:
                  action: call-service
                  service: script.tv_v_toggle
              - entity: binary_sensor.iconbit
                icon: mdi:play-network
                name: Iconbit
                tap_action:
                  action: call-service
                  service: script.iconbit_toggle
          - type: glance
            #title: Sockets
            show_name: true
            show_state: false
            columns: 6
            entities:
              - entity: switch.wall_plug_158d000230fc52
                name: Fridge
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d00024517fe
                name: Entr
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d0001f2630e
                name: Wadr L
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d00023e5812
                name: Wadr R
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000322e1d9
                name: Doorcam
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              
              - entity: switch.wall_plug_158d000249b26b
                name: Main HS
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d0002924790
                name: Util HS
                icon: mdi:power-socket
               
              
              - entity: switch.wall_plug_158d0002451850
                name: PC K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d0002476ed1
                name: TV K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d000249b25b
                name: Oven K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000232481a
                name: Air K
                icon: mdi:power-socket
                tap_action:
                  action: toggle
              #- entity: switch.plug_top_k
              #  name: Top K
              #  icon: mdi:power-socket
              #  tap_action:
              #    action: toggle
                 
              
              - entity: switch.wall_plug_158d0002467773
                name: PC MB
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000205a835
                name: BPlug MB
                icon: mdi:power-socket
                tap_action:
                  action: toggle
                                         
              - entity: switch.wall_plug_158d000246776f
                name: Entr V
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d0002468fbd
                name: Window V
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d0002395dc9
                name: TV V
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000290a093
                name: Sony
                icon: mdi:power-socket
                tap_action:
                  action: toggle
              - entity: switch.plug_158d000290a0bc
                name: Iconbit
                icon: mdi:power-socket
                tap_action:
                  action: toggle
               
              - entity: switch.wall_plug_158d000239097a
                name: PC S
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.wall_plug_158d0002395d58
                name: Window S
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.plug_158d00023a657a
                name: Heater S
                icon: mdi:radiator
                tap_action:
                  action: toggle
                  
              - entity: switch.plug_158d0002c3d86e
                name: Washer
                tap_action:
                  action: toggle
              - entity: switch.plug_158d00028c9875
                name: Kettle
                tap_action:
                  action: toggle
              - entity: switch.plug_158d00028a54e4
                name: Microwave
                tap_action:
                  action: toggle

          - type: glance
            #title: Gateway's Plugs
            show_name: true
            show_state: false
            columns: 7
            entities:
              - entity: switch.gateway_plug_entrance_hb
                name: HBe
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_hb
                name: HB
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_hs
                name: HS
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_k
                name: K
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_mb
                name: MB
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_s
                name: S
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: switch.gateway_plug_v
                name: V
                tap_action:
                  action: toggle
                icon: mdi:power
              - entity: light.gateway_light_04cf8c978f0c
                name: HBe
                tap_action:
                  action: toggle
              - entity: light.gateway_light_7811dcb8cb4b
                name: HB
                tap_action:
                  action: toggle
              - entity: light.gateway_light_7c49eb195e21
                name: HS
                tap_action:
                  action: toggle
              - entity: light.gateway_light_04cf8c97808b
                name: K
                tap_action:
                  action: toggle
              - entity: light.gateway_light_7c49ebb1b5e1
                name: MB
                tap_action:
                  action: toggle
              - entity: light.gateway_light_7811dcb8d612
                name: S
                tap_action:
                  action: toggle
              - entity: light.gateway_light_7c49ebb19080
                name: V
                tap_action:
                  action: toggle
          # - type: horizontal-stack
          #   cards:
          #     - type: entity-button
          #       name: Devices
          #       entity: light.my_lights
          #       hold_action: none
          #       tap_action:
          #         action: call-service
          #         service: homeassistant.turn_off
          #         entity_id: group.devices_to_turnoff
          #     - type: entity-button
          #       name: Fans
          #       icon: mdi:fan
          #       entity: group.all_fans
          #       hold_action: none
          #       tap_action:
          #         action: call-service
          #         service: homeassistant.toggle
          #         service_data:
          #           entity_id: group.all_fans
          #     - type: entity-button
          #       name: Left home
          #       icon: mdi:lightbulb-outline
          #       entity: light.my_lights
          #       hold_action: none
          #       tap_action:
          #         action: call-service
          #         service: automation.trigger
          #         service_data:
          #           entity_id: automation.hall_big_left_home
              
                  
        #OL - ИБП работает от сети,
        #OB - ИБП работает от батареи,
        #LB - батарея разряжена,
        #RB - необходима замена батареи,
        #CHRG - батарея заряжается,
        #DISCHRG - батарея разряжается,
        #BYPASS - ИБП работает в режиме питания от сети в обход батареи,
        #OVER - ИБП перегружен,
        #TRIM - ИБП отрезает повышенное напряжение сети,
        #BOOST - ИБП усиливает пониженное напряжение сети,


################################################################
# SECURITY PAGE
################################################################
  - title: Security
    icon: mdi:shield
    show_header_toggle: false
    cards:
      #- type: custom:compact-custom-header
      - type: vertical-stack
        cards:
          - type: glance
            #title: Status
            entities:
              - entity: binary_sensor.security
                name: Security
                tap_action:
                  action: call-service
                  service: script.security_mode_toggle
              - entity: binary_sensor.family_home
                name: Family
              #- entity: sensor.home_status
              #  name: Home
              - entity: counter.main_door_hb
                name: In\Out
          - type: glance
            #title: Status
            entities:
              - entity: proximity.dima_home
                name: Dima
              - entity: proximity.sandra_home
                name: Sandra
              - entity: proximity.vova_home
                name: Vova

          - type: entities
            #title: Safety
            show_header_toggle: false
            entities:
              - entity: sensor.security_last_change
                secondary_info: last-changed
                name: Last active sensor
              - type: divider
              - entity: binary_sensor.motion
                secondary_info: last-changed
              - entity: sensor.last_motion
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.motion_unifi
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.doors
                secondary_info: last-changed
              - entity: sensor.door_last_change
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.windows
                secondary_info: last-changed
              - entity: sensor.window_last_change
                secondary_info: last-changed
                
          - type: entities
            #title: Fire Safety
            show_header_toggle: false
            entities:
              - entity: binary_sensor.natgas_sensor_158d00024bcf85
                secondary_info: last-changed
              - entity: binary_sensor.smoke_sensor_158d0002c92f31
                secondary_info: last-changed
      
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                cards:  
                  - type: glance
                    #title: Locks
                    show_header_toggle: false
                    entities:
                      - entity: binary_sensor.upper_lock
                        name: Upper Lock
                      - entity: binary_sensor.bottom_lock
                        name: Bottom Lock
                  
          - type: entities
            #title: Windows
            show_header_toggle: false
            entities:
              - entity: binary_sensor.door_window_sensor_158d00025371f6
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d000200ad58
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d00022ccffe
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d00025370d1
                secondary_info: last-changed
          
          - type: entities
            #title: Doors
            show_header_toggle: false
            entities:
              - entity: binary_sensor.door_window_sensor_158d00027129ae
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d0001ef2ffc
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d0002a14c5e
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d0002529b9c
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d00025315e9
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d0001e5d6be
                secondary_info: last-changed
              - entity: binary_sensor.door_window_sensor_158d0002531749
                secondary_info: last-changed
      
      - type: entities
        #title: Motion
        show_header_toggle: false
        entities:
          - entity: binary_sensor.pinhole_camera_motion
            secondary_info: last-changed
          - entity: binary_sensor.esp32_domofon_motion
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001e53cda
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d000224f89f
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d000236bb94
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001e05856
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0002b482e9
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001d5995e
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001ae9f61
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0002b4729d
            secondary_info: last-changed
          - entity:   binary_sensor.motion_sensor_158d0002b48381
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d000236bc6d
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001e54280
            secondary_info: last-changed
          - entity: binary_sensor.motion_sensor_158d0001aea602
            secondary_info: last-changed
          - entity: binary_sensor.unifi_motion_entrance
            secondary_info: last-changed
          - entity: binary_sensor.unifi_motion_hall
            secondary_info: last-changed
          - entity: binary_sensor.unifi_motion_dixy
            secondary_info: last-changed
          - entity: binary_sensor.unifi_motion_window
            secondary_info: last-changed

################################################################
# DEVICES BY ROOM PAGE
################################################################
  - title: Rooms
    icon: mdi:card-outline
    show_header_toggle: false
    cards:
      - type: entities
        title: Hall Big
        show_header_toggle: false
        entities:
          - switch.wall_switch_left_158d000223921b
          - switch.wall_switch_right_158d000253f04a
          - light.led_strip_hb
          - light.gateway_light_7811dcb8cb4b
          - type: divider
          - switch.plug_158d0003539447
          - switch.plug_158d000322e1d9
          - type: divider
          - switch.wall_switch_right_158d000223921b
          - switch.wall_switch_left_158d000253f04a
          - type: divider
          - switch.wall_plug_158d000230fc52
          - switch.wall_plug_158d00024517fe
          - switch.wall_plug_158d0001f2630e
          - switch.wall_plug_158d00023e5812
          - type: divider
          - switch.plug_158d00032391fd
      - type: entities
        title: Sasha's Room
        show_header_toggle: false
        entities:
          - switch.wall_switch_left_158d0002a36433
          - light.philips_e27_s
          - light.gateway_light_7811dcb8d612
          - entity: light.led_color_k
            name: Desk Color S
          - type: divider
          - fan.humidifier2
          - switch.plug_158d00023a657a
          - type: divider
          - switch.wall_switch_right_158d0002a36433
          - type: divider
          - switch.wall_plug_158d000239097a
          - switch.wall_plug_158d0002395d58
          - switch.power_strip_s
          - type: divider
          - switch.plug_158d000392623d
      - type: entities
        title: Kitchen
        show_header_toggle: false
        entities:
          - switch.wall_switch_right_158d0002a36f7f
          - switch.plug_158d000216528c
          - switch.d1_hood_light
          - switch.wall_switch_right_158d0002a365df
          - switch.wall_switch_left_158d0002a365df
          - light.gateway_light_04cf8c97808b
          - type: divider
          - switch.d1_hood_fan1
          - switch.d1_hood_fan2
          - switch.d1_hood_fan3
          - type: divider
          - switch.wall_plug_158d0002451850
          - switch.wall_plug_158d0002476ed1
          - switch.wall_plug_158d000249b25b
          - type: divider
          - switch.plug_158d000232481a
          - type: divider
          - switch.plug_158d0001e85086
      - type: entities
        title: Vova's Room
        show_header_toggle: false
        entities:
          - light.square_led_v
          #- light.bedside_mb
          - light.led_color_v
          - light.gateway_light_7c49ebb19080
          - type: divider
          - switch.wall_plug_158d0002395dc9
          - switch.wall_plug_158d000246776f
          - switch.plug_158d0002468fbd
          - type: divider
          - switch.plug_158d000290a093
          - switch.plug_158d000290a0bc
          - switch.plug_158d00028b4fc3
          - switch.plug_158d00035c194f
          - switch.plug_158d0003600ea4
          - type: divider
          - switch.plug_158d00020b4971
          - switch.plug_158d00039bd56d
      - type: entities
        title: Hall Small
        show_header_toggle: false
        entities:
          - switch.wall_switch_left_158d0002a36e26
          - switch.plug_158d0001f5501f
          - light.gateway_light_7c49eb195e21
          - type: divider
          - switch.wall_plug_158d000249b26b
          - switch.plug_158d0002924790
      - type: entities
        title: Master Bedroom
        show_header_toggle: false
        entities:
          - light.round_led_mb
          - light.round_led_mb_ambilight
          - light.philips_e27_mb
          - light.gateway_light_7c49ebb1b5e1
          - type: divider
          - fan.purifier2s
          - type: divider
          - switch.wall_plug_158d0002467773
          - switch.plug_158d000205a835
          - switch.plug_158d000322e30c
          - type: divider
          - switch.plug_158d0002482619
      - type: entities
        title: Bathroom
        show_header_toggle: false
        entities:
          - switch.wall_switch_right_158d0002a36e26
          - type: divider
          - switch.plug_158d0002c3d86e
          - switch.plug_158d0003926263
          - switch.plug_158d0001f9ebd8
          - type: divider
          - switch.plug_158d0001f54f90
          - switch.plug_158d00020d8679
          
      - type: entities
        title: Toilet
        show_header_toggle: false
        entities:
          - switch.wall_switch_left_158d0002a36f7f
          - type: divider
          - switch.plug_158d0001f54f91
      - type: entities
        title: Storage
        show_header_toggle: false
        entities:
          - switch.wall_switch_158d000248bf53

################################################################
# SENSORS BY ROOM PAGE
################################################################      
  - title: Sensors
    icon: mdi:album
    cards:
      - type: entities
        title: Hall Big
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d0001e5d6be
          - binary_sensor.door_window_sensor_158d0002531749
          - binary_sensor.motion_sensor_158d0001d5995e
          - binary_sensor.motion_sensor_158d0001e05856
          - binary_sensor.motion_sensor_158d0002b482e9
          - binary_sensor.switch_158d00023d3206
          - sensor.illumination_158d0001e05856
          - sensor.illumination_7811dcb8cb4b
          - sensor.illumination_158d0002b482e9
          - sensor.temperature_158d000237167c
          - sensor.pressure_158d000237167c
          - sensor.humidity_158d000237167c
          - sensor.temperature_158d0002461e5b
          - sensor.humidity_158d0002461e5b
          - binary_sensor.vibration_158d0002b5fbc1
          - sensor.bed_activity_158d0002b5fbc1
          - sensor.coordination_158d0002b5fbc1
          - sensor.tilt_angle_158d0002b5fbc1
          - sun.sun
      - type: entities
        title: Sasha's Room
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d00025370d1
          - binary_sensor.door_window_sensor_158d00027129ae
          - binary_sensor.motion_sensor_158d000224f89f
          - binary_sensor.switch_158d00019c8afd
          - binary_sensor.switch_158d0001f3627d
          - binary_sensor.vibration_158d0002a8ac3c
          - sensor.bed_activity_158d0002a8ac3c
          - sensor.coordination_158d0002a8ac3c
          - sensor.humidity_158d0001e6d85a
          - sensor.illumination_158d000224f89f
          - sensor.illumination_7811dcb8d612
          - sensor.temperature_158d0001e6d85a
          - sensor.tilt_angle_158d0002a8ac3c
      - type: entities
        title: Kitchen
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d00025371f6
          - binary_sensor.motion_sensor_158d0002b4729d
          - binary_sensor.motion_sensor_158d0002b48381
          - sensor.illumination_158d0002b4729d
          - binary_sensor.water_leak_sensor_158d00023297e7
          - sensor.humidity_158d0001e586af
          - sensor.illumination_04cf8c97808b
          - sensor.temperature_158d0001e586af
          - binary_sensor.natgas_sensor_158d00024bcf85
          - binary_sensor.smoke_sensor_158d0002c92f31
      - type: entities
        title: Vova's Room
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d00022ccffe
          - binary_sensor.door_window_sensor_158d0002529b9c
          - binary_sensor.motion_sensor_158d000236bb94
          - binary_sensor.switch_158d00016bdb4a
          - binary_sensor.wall_switch_both_158d0001712d55
          - binary_sensor.wall_switch_left_158d0001712d55
          - binary_sensor.wall_switch_right_158d0001712d55
          - sensor.humidity_158d0001e58714
          - sensor.illumination_158d000236bb94
          - sensor.illumination_7c49ebb19080
          - sensor.temperature_158d0001e58714
      - type: entities
        title: Hall Small
        show_header_toggle: false
        entities:
          - binary_sensor.motion_sensor_158d0001ae9f61
          - sensor.illumination_7c49eb195e21
      - type: entities
        title: Master Bedroom
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d000200ad58
          - binary_sensor.door_window_sensor_158d00025315e9
          - binary_sensor.motion_sensor_158d0001e53cda
          - binary_sensor.wall_switch_both_158d00013e6aa5
          - binary_sensor.wall_switch_left_158d00013e6aa5
          - binary_sensor.wall_switch_right_158d00013e6aa5
          - sensor.humidity_158d000222c746
          - sensor.illumination_158d0001e53cda
          - sensor.illumination_7c49ebb1b5e1
          - sensor.temperature_158d000222c746
          - binary_sensor.vibration_158d0002a2412d
          - sensor.bed_activity_158d0002a2412d
          - sensor.coordination_158d0002a2412d
          - sensor.tilt_angle_158d0002a2412d

      - type: entities
        title: Bathroom
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d0002a14c5e
          - binary_sensor.motion_sensor_158d000236bc6d
          - binary_sensor.switch_158d0001b94abe
          - binary_sensor.water_leak_sensor_158d0002373a67
          - sensor.humidity_158d00020d7c3a
          - sensor.illumination_158d000236bc6d
          - sensor.temperature_158d00020d7c3a
      - type: entities
        title: Toilet
        show_header_toggle: false
        entities:
          - binary_sensor.door_window_sensor_158d000232ddd6
          - binary_sensor.door_window_sensor_158d0001ef2ffc
          - binary_sensor.motion_sensor_158d0001e54280
          - binary_sensor.switch_158d0001b97111
          - binary_sensor.water_leak_sensor_158d00023684c2
          - sensor.illumination_158d0001e54280
          - sensor.humidity_158d0001e58754
          - sensor.temperature_158d0001e58754
      - type: entities
        title: Storage
        show_header_toggle: false
        entities:
          - binary_sensor.motion_sensor_158d0001aea602
          - binary_sensor.switch_158d00023d0b86
          - sensor.temperature_158d000233fb72
          - sensor.pressure_158d000233fb72
          - sensor.humidity_158d000233fb72

################################################################
# UTILITY COUNTERS PAGE
################################################################
  - title: Utility
    icon: mdi:counter
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 4
            entities:
              - entity: sensor.water_mineralized_single
                name: Total Mineralized
              - entity: sensor.water_non_mineralized_single
                name: Total Non-Mineralized
              - entity: sensor.water_raw_single
                name: Total RAW
              - entity: sensor.water_postmembrane_single
                name: Total PostMembrane
                
              
              - entity: sensor.water_mineralized_daily_single
                name: Today Mineralized
              - entity: sensor.water_non_mineralized_daily_single
                name: Today Non-Mineralized
              - entity: sensor.water_raw_daily_single
                name: Today RAW
              - entity: sensor.water_postmembrane_daily_single
                name: Today PostMembrane
              

              - entity: sensor.water_mineralized_yesterday
                name: Yesterday Mineralized
              - entity: sensor.water_nonmineralized_yesterday
                name: Yesterday Non-Mineralized
              - entity: sensor.water_raw_yesterday
                name: Yesterday RAW
              - entity: sensor.water_postmembrane_yesterday
                name: Yesterday PostMembrane
                
                
          - type: entities
            #title: Utility Cost
            show_header_toggle: false
            entities:
              - sensor.utility_cost
              - type: divider
              - type: divider
              - sensor.water_cost 
              - type: divider
              - type: divider
              - sensor.power_consumption_month_cost
          - type: entities
            entities:
              - input_number.tariff_energy_day
              - input_number.tariff_energy_night
              - type: divider
              - input_number.tariff_hot_water
              - input_number.tariff_cold_water
      - type:  vertical-stack
        cards:
          - type: custom:mini-graph-card
            entities:
              - sensor.water_change_60m
            name: Water usage
            show:
              graph: bar
            line_color: blue
            icon: mdi:water-pump
            hours_to_show: 48
            points_per_hour: 1
            extrema: true
            labels: true
            line_width: 3
            decimals: 2
            hour24: true
          
          - type: entities
            title: Water
            show_header_toggle: false
            entities:
              - sensor.hot_water_month
              - sensor.cold_water_month
              - type: divider
              # - counter.hot_water_meter
              - sensor.hot_water_meter
              # - sensor.hot_water_usage_mean
              # - counter.cold_water_meter
              - sensor.cold_water_meter
              # - sensor.cold_water_usage_mean
              - type: divider
              - input_number.hot_water_meter
              - input_number.cold_water_meter
              - type: divider
              - input_number.hot_water_meter_last_month
              - input_number.cold_water_meter_last_month
              - type: divider
              - entity: binary_sensor.door_window_sensor_158d000232de79
                name: Cold water sensor
              - entity: binary_sensor.door_window_sensor_158d000236fcd5
                name: Hot water sensor
          
          #- type: custom:mini-graph-card
          #  entities:
          #    - sensor.water
          #  name: Water meter
          #  #show:
          #  #  graph: bar
          #  #line_color: red
          #  hours_to_show: 48
          #  points_per_hour: 1
          #  extrema: true
          # line_width: 3
          #  decimals: 0
          #  hour24: true
          
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            icon: mdi:flash
            entities:
              - sensor.power_consumption
            name: Power Consumption
            show:
              graph: bar
            line_color: red
            hours_to_show: 48
            points_per_hour: 1
            extrema: true
            labels: true
            line_width: 3
            decimals: 2
            hour24: true
          
          - type: entities
            title: Power
            show_header_toggle: false
            entities:
              - sensor.power_consumption_month_t1
              - sensor.power_consumption_month_t2
              - type: divider
              #- sensor.power_consumption
              #- sensor.power_consumption_today
              #- sensor.power_consumption_t1
              #- sensor.power_consumption_t2
              #- sensor.power_consumption_yesterday
              - sensor.power_t1
              - sensor.power_t2
              #- sensor.power_consumption_month_prev
              #- sensor.power_consumption_month_expected
              - type: divider
              - input_number.power_t1
              - input_number.power_t2
              - type: divider
              - input_number.power_meter_last_month_t1
              - input_number.power_meter_last_month_t2
################################################################
# POWER LOADS PAGE
################################################################
  - title: Socket Loads
    icon: mdi:flash
    cards:
      ##########################################
      # Left column
      ##########################################
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: gauge
                name: Current
                entity: sensor.total_current
                max: 40
                severity:
                  green: 1
                  yellow: 20
                  red: 30
              - type: gauge
                name: Voltage
                entity: sensor.voltage
                max: 230
                severity:
                  green: 215
                  yellow: 120
                  red: 50
          - type: horizontal-stack
            cards:
              - type: gauge
                name: Power
                entity: sensor.power_consumption
                max: 12000
                severity:
                  green: 100
                  yellow: 5000
                  red: 10000
              #- type: glance
              #  entities:
              #    - entity: binary_sensor.8266_pwr_meter_imp
              #      name: Mercury 200
              - type: gauge
                name: Mercury 200
                entity: sensor.8266_pwr_power_meter
                max: 50
                severity:
                  green: 5
                  yellow: 15
                  red: 40

              #- type: entities
              #  title: TOTAL
              #  show_header_toggle: false
              #  entities:
                  #- sensor.total_current
                  #- type: divider
                  #- sensor.power_consumption
                  #- sensor.power_consumption_today
                  #- sensor.power_consumption_t1
                  #- sensor.power_consumption_t2
          - type: glance
            title: By Room
            show_header_toggle: false
            entities:
              - entity: sensor.power_consumption_mb
                name: MB
              - entity: sensor.power_consumption_v
                name: V
              - entity: sensor.power_consumption_s
                name: S
              - entity: sensor.power_consumption_hb
                name: HB
              - entity: sensor.power_consumption_hs
                name: HS
              - entity: sensor.power_consumption_k
                name: K
              - entity: sensor.power_consumption_b
                name: B
              - entity: sensor.power_consumption_t
                name: T
              - entity: sensor.power_consumption_st
                name: St

      ##########################################
      # Mid column
      ##########################################
      - type: vertical-stack
        cards:
          - type: entities
            title: Hall Big
            show_header_toggle: false
            entities:
              - sensor.server_z_hb
              - sensor.fridge_hb
              - sensor.entrance_hb
              - sensor.wadrobe_l_hb
              - sensor.wadrobe_r_hb
              
          - type: entities
            title: Hall Small
            show_header_toggle: false
            entities:
              - sensor.main_hs
              - sensor.utility_hs
              - type: divider
              - sensor.fan_b
              - sensor.fan_t
              - sensor.water_on_b
              - sensor.water_off_b
          - type: entities
            title: Master bedroom
            show_header_toggle: false
            entities:
              - sensor.pc_mb
              - sensor.bed_plug_mb
      ##########################################
      # Right column
      ##########################################
      - type: vertical-stack
        cards:
          - type: entities
            title: Sasha
            show_header_toggle: false
            entities:
              - sensor.pc_s
              - sensor.wadrobe_s
              - sensor.heater_s
          
          - type: entities
            title: Vova
            show_header_toggle: false
            entities:
              - sensor.entrance_v
              - sensor.tv_v
              - sensor.wadrobe_v
              
          - type: entities
            title: Kitchen
            show_header_toggle: false
            entities:
              - sensor.pc_k
              - sensor.tv_k
              - sensor.oven_k
              - sensor.air_filter_k
              - sensor.night_k
              - sensor.plug_tv_k

################################################################
# DEVICE TRACKERS PAGE
################################################################
  - title: Devices
    icon: mdi:cellphone-link
    cards:
      - type: entities
        title: Smart Home
        show_header_toggle: false
        entities:
          - device_tracker.bedside_lamp_mb
          - device_tracker.e27_s
          - device_tracker.e27_mb
          - device_tracker.led_color_v
          - device_tracker.led_color_k
          - device_tracker.round_led_mb
          - device_tracker.square_led_v
          - device_tracker.led_strip_hb
          - type: divider
          - device_tracker.gateway_hb
          - device_tracker.gateway_entrance_hb
          - device_tracker.gateway_hs
          - device_tracker.gateway_k
          - device_tracker.gateway_v
          - device_tracker.gateway_s
          - device_tracker.gateway_mb
          - type: divider
          - device_tracker.gateway_plug_hb
          - device_tracker.gateway_plug_entr_hb
          - device_tracker.gateway_plug_hs
          - device_tracker.gateway_plug_k
          - device_tracker.gateway_plug_v
          - device_tracker.gateway_plug_s
          - device_tracker.gateway_plug_mb
          - device_tracker.server_plug_hb
          - device_tracker.power_strip_mb
          - device_tracker.power_strip_s
          - device_tracker.plug_top_k
          - type: divider
          - device_tracker.humi
          - device_tracker.purifier2s
          - type: divider
          - device_tracker.mi_ir
          
      - type: entities
        title: Phones
        show_header_toggle: false
        entities:
          - device_tracker.life360_dima_tsymbal
          - device_tracker.dima_iphone_8
          - device_tracker.iphone8_ping
          - device_tracker.meizu_2
          
          - type: divider
          - device_tracker.life360_sandra_tsymbal
          - device_tracker.sandra_iphone_7
          - device_tracker.iphone7_ping
          - device_tracker.sandra_iphone_6
          - device_tracker.sandra_iphone_4s
          
          - type: divider
          - device_tracker.life360_vova_tsymbal
          - device_tracker.vova_mimax
          - device_tracker.mimax2_ping
          
          - type: divider
          - device_tracker.sasha_iphone_5s
          
          - type: divider
          - device_tracker.ipad_sandra
          - device_tracker.ipad_dima
          - device_tracker.lena_iphone
          - device_tracker.iphone_saska
      
      - type: entities
        title: PCs
        show_header_toggle: false
        entities:
          #- device_tracker.blackhole_lan
          #- entity: binary_sensor.blackhole
            #icon: mdi:ubuntu
          - device_tracker.z9pa_ipmi
          - device_tracker.z9pa_bond0
          - device_tracker.i5
          - device_tracker.m6800_lan
          - device_tracker.m6800_wifi
          - device_tracker.r418_wifi
          - device_tracker.u430p_wifi
          - device_tracker.brix3160_lan
          - device_tracker.brix3455_lan
          - device_tracker.brix3455_wifi
          - device_tracker.rpi_lan
          - device_tracker.rpi_wifi
          - device_tracker.acer_722_wifi
          - device_tracker.dell_5721_wifi
          - device_tracker.asus_v1j
          - device_tracker.j3455_lan
          - device_tracker.a722_board
      
      - type: entities
        title: Network
        show_header_toggle: false
        entities:
          - device_tracker.maingate
          - device_tracker.unificloudkey
          - device_tracker.mainswitch
          - device_tracker.switch_8_60_k
          - device_tracker.ap_hb
          - device_tracker.ap_hs
          - device_tracker.ap_s
          - device_tracker.ap_v
          - device_tracker.ap_mb
      
      - type: entities
        title: Others
        show_header_toggle: false
        entities:
          - device_tracker.320l
          - device_tracker.kitchen_tv
          - device_tracker.iconbit_v
          - device_tracker.checkmachine
          - device_tracker.hp8600
          - device_tracker.hp8600_lan
          - device_tracker.security
          
      - type: entities
        title: Cameras
        show_header_toggle: false
        entities:
          - device_tracker.g3_flex_kitchen
          - device_tracker.g3_flex_window
          - device_tracker.g3_flex_hall
          - device_tracker.g3_flex_entrance
          - type: divider
          - device_tracker.roundcam
          - device_tracker.square_cam_hs
          - device_tracker.360camera
          - device_tracker.digma_100
          - device_tracker.door_cam_hb
      
      - type: entities
        title: Home Mini
        show_header_toggle: false
        entities:
          - device_tracker.home_mini_k
          - device_tracker.home_mini_v
          - device_tracker.home_mini_s
          - device_tracker.home_mini_mb
          - device_tracker.home_mini_hb
      
      - type: entities
        title: Boards
        show_header_toggle: false
        entities:
          - device_tracker.rpi_cam_wifi
          - device_tracker.rpi_zero
          - device_tracker.pi_zero2_mb
          - device_tracker.pi_zero2_mqtt
          - device_tracker.pi_zero2_test2
          
      - type: entities
        title: ESPs
        show_header_toggle: false
        entities:
          - device_tracker.8266_test1
          - device_tracker.8266_air_valve
          - device_tracker.esp01_hdd
          - device_tracker.esp32_cam_test1
          - device_tracker.esp32_test1
          - device_tracker.esp32_domofon
          - device_tracker.esp32_kitchen_main
          - device_tracker.d1_domofon
          - device_tracker.d1_filter_flow
          - device_tracker.d1_hood
          - device_tracker.sonoff_mini
          - device_tracker.sonoff_4ch

      - type: entities
        title: CO2 sensors
        show_header_toggle: false
        entities:
          - device_tracker.d1_mini_co2_mb
          - device_tracker.d1_mini_co2_v
          - device_tracker.d1_mini_co2_s

################################################################
# Cameras PAGE
################################################################

          
  - title: Cameras
    icon: mdi:cctv
    cards:
      - type: 'custom:camera-card'
        entity: camera.door_hb
      - type: 'custom:camera-card'
        entity: camera.digma100
      - type: 'custom:camera-card'
        entity: camera.uvc_g3_flex_entrance
      - type: 'custom:camera-card'
        entity:  camera.uvc_g3_flex_hall
      - type: 'custom:camera-card'
        entity: camera.uvc_g3_flex_dixy
      - type: 'custom:camera-card'
        entity: camera.uvc_g3_flex_window

      

################################################################
# CLIMATE PAGE
################################################################
  - title: Climate
    icon: mdi:weather-sunset
#    panel: true
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            entities:
              - entity: fan.humidifier2
              - type: divider
              - entity: sensor.humidifier_led
                name: LED
              - entity: sensor.humidifier_mode
                name: Mode
              - entity: sensor.humidifier_fan_speed
                name: Fan speed
               
              - entity: sensor.humidifier_water_level
                name: Water level
 
          - type: horizontal-stack
            cards:
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_humidifier_mode
 
              - type: entity-button
                name: LED
                icon: mdi:lightbulb
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_humidifier_led
 
              - type: entity-button
                name: Buzzer
                icon: mdi:music-note
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.set_humidifier_buzzer
 
              - type: entity-button
                name: DRY MODE
                icon: mdi:cup-water
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.set_humidifier_dry_mode
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.temperature_158d0001e6d85a
              - sensor.humidity_158d0001e6d85a

      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            entities:
              - entity: fan.purifier2s
              - type: divider
              - entity: sensor.purifier_pm25
                name: PM2.5
                icon: mdi:meteor
              - entity: sensor.purifier_mode
                name: Mode
              - entity: sensor.purifier_fan_speed
                name: Fan speed
              - entity: sensor.purifier_filter_left
                name: Filter left

 
          - type: horizontal-stack
            cards:
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
 
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.temperature_158d0001e58714
              - sensor.humidity_158d0001e58714
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.purifier_pm25
      - type: vertical-stack
        cards:
          - type: glance
            entities:
              - sensor.z19_co2_v
              - sensor.z19_co2_s
              - sensor.z19_co2_mb
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 V'
            entities:
              - sensor.z19_co2_v
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 S'
            entities:
              - sensor.z19_co2_s
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 MB'
            entities:
              - sensor.z19_co2_mb
          
          
          
          #- type: custom:mini-graph-card
          #  title: CO2 V
          #  entities:
          #    - sensor.mh_z19_co2_value_2
          #  hours_to_show: 48
          #  line_color: black
          #  points_per_hour: 1
          #  decimals: 0
          #  hour24: true
          #  extrema: true
          #  labels: true
          #  line_width: 3
          #- type: custom:mini-graph-card
          #  title: CO2 S
          #  entities:
          #    - sensor.mh_z19_co2_value_3
          #  hours_to_show: 48
          #  line_color: black
          #  points_per_hour: 1
          #  decimals: 0
          #  hour24: true
          #  extrema: true
          #  labels: true
          #  line_width: 3
          #- type: custom:mini-graph-card
          #  title: CO2 MB
          #  entities:
          #    - sensor.mh_z19_co2_value
          #  hours_to_show: 48
          #  line_color: black
          #  points_per_hour: 1
          #  decimals: 0
          #  hour24: true
          #  extrema: true
          #  labels: true
          #  line_width: 3
            
            

################################################################
# SYSTEM MONITORING PAGE
################################################################
  - title: System Details
    icon: mdi:settings-outline
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 8
            entities:
              - entity: media_player.home_mini_v
                name: V
              - entity: media_player.home_mini_s
                name: S
              - entity: media_player.home_mini_k
                name: K
              - entity: media_player.home_mini_mb
                name: MB
              - entity: media_player.home_mini_hb
                name: HB
              - entity: media_player.mpd
                name: MPD
              - entity: media_player.mpd_j3455
                name: MPD j3455
              - entity: media_player.mpd_rpi
                name: MPD RPI
          - type: glance
            entities:
              - entity: switch.i5_vova
                name: i5
                hold_action: none
                tap_action:
                  action: toggle
              - entity: switch.r418
                name: R418
                hold_action: none
                tap_action:
                  action: toggle
              - entity: switch.u430p
                name: U430P
                hold_action: none
                tap_action:
                  action: toggle
              - entity: switch.brix3455_lan
                name: BRIX
                hold_action: none
                tap_action:
                  action: toggle
          #    - sensor.cpu_temperature
          # - type: history-graph
          #   hours_to_show: 48
          #   entities:
          #     - sensor.db_size
          - type: entities
            entities:
              - sensor.db_size
              - sensor.db_size_change_1h
              - sensor.influxdb_size
              - sensor.influxdb_size_change_1h
              - type: call-service
                icon: mdi:database-minus
                name: Purge 0
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 0
                  repack: true
              - type: call-service
                icon: mdi:database-minus
                name: Purge 1
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 1
                  repack: true
              - type: call-service
                icon: mdi:database-minus
                name: Purge 2
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 2
                  repack: true
          
          
          - type: glance
            entities:
              - entity: switch.esp01_hdd_box_power
                name: USB HDD
                tap_action:
                  action: toggle
              - entity: binary_sensor.esp01_hdd_box_powerstatus
                name: Status
                tap_action:
                  action: call-service
                  service: switch.toggle
                  service_data:
                    entity_id: switch.esp01_hdd_box_power
              - entity: binary_sensor.esp01_hdd_box_status
                name: Connection

          - type: entity-filter
            show_header_toggle: false
            entities:
              - entity: timer.timer_b
              - entity: timer.timer_t
              - entity: timer.timer_k
              - entity: timer.timer_hb
              - entity: timer.timer_fan_b
              - entity: timer.timer_fan_t
              - entity: timer.timer_st
              - entity: timer.timer_washer_b
            state_filter:
            - "active"

      # Mid column
      #############
      - type: vertical-stack
        cards:
          # - type: custom:github-card
          #   entities:
          #     - sensor.myconfig
          # - type: glance
          #   columns: 5
          #   entities:
          #     - entity: binary_sensor.tod_night
          #       name: Night
          #     - entity: binary_sensor.tod_early_night
          #       name: Night early
          #     - entity: binary_sensor.tod_morning
          #       name: Morning
          #     - entity: binary_sensor.tod_day
          #       name: Day
          #     - entity: binary_sensor.tod_day_long
          #       name: Day long
          #     - entity: binary_sensor.tod_evening 
          #       name: Evening
          #     - entity: binary_sensor.tariff_t1 
          #       name: T1
          #     - entity: binary_sensor.tariff_t2
          #       name: T2
          #     - entity: binary_sensor.tod_full_day
          #       name: Day astro
          #     - entity: binary_sensor.tod_full_night
          #       name: Night astro
          - type: glance
            entities:
              - sensor.git_stars
              - entity: sensor.config_line_count_sh_ratio
                name: Config Ratio
              - entity: sensor.config_line_count_sh
                name: Total Lines
              - entity: sensor.config_line_count_sh_code
                name: Code Lines
          - type: glance
            show_header_toggle: false
            columns: 7
            entities:
              - entity: sensor.tracker_count
                icon: mdi:cellphone-link
                name: Trackers
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.lights_count
                name: Lights
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.sensor_count
                name: Sensors
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.binary_sensor_count
                name: B-Sensors
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.switch_count
                name: Switches
              - entity: sensor.automation_count
                name: Auto
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.script_count
                name: Scripts
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
          - type: custom:vertical-stack-in-card
            cards:
              - type: glance
                columns: 5
                entities:
                - entity: sensor.ha_init
                  name: HA Init
                - entity: sensor.ha_uptime
                  name: HA Up
                - entity: sensor.host_uptime
                  name: Host Up
                  icon: mdi:clock-outline
                - entity: sensor.ha_installed_version
                  name: Installed
                - entity: sensor.ha_latest_version
                  name: Latest
                  tap_action:
                    action: call-service
                    service: script.ha_released_update
                    
              - type: glance
                entities:
                  - entity: counter.badlogin_counter
                    name: Bad Logins
                  - entity: counter.restart_counter
                    name: Restarts
                  - entity: counter.error_counter
                    name: Errors
                    tap_action:
                      action: call-service
                      service: script.error_reset
                  - entity: counter.warning_counter
                    name: Warnings
                    tap_action:
                      action: call-service
                      service: script.warning_reset
              - type: glance
                show_header_toggle: false
                entities:
                  - entity: sensor.gdrive_backup_state
                    icon: mdi:google-drive
                    name: G-BU Status
                  - entity: binary_sensor.snapshots_stale
                    name: G-BU Stale
                  - entity: sensor.gdrive_last_backup
                    icon: mdi:clock-digital
                    name: G-BU Last
#              - type: glance
#                show_header_toggle: false
#                columns: 7
#                entities:
#                - entity: script.ha_backup
#                  name: Do Now
#                  icon: mdi:cloud-upload
#                  #tap_action:
#                  #    service: script.ha_backup
#                - entity: sensor.last_google_backup
#                  icon: mdi:map-clock-outline
##                  name: Last
#                - entity: sensor.last_google_filecount
#                  icon: mdi:file-search
##                  name: Files
#                - entity: sensor.last_google_alreadycount
#                  icon: mdi:file-export
#                  name: G-Files
#                - entity: sensor.last_google_backedupcount
#                  icon: mdi:google-plus-box
#                  name: Copied
#                - entity: sensor.last_google_deletedcount
#                  icon: mdi:file-remove
#                  name: Del
#                - entity: sensor.last_google_deletedfromgoogle
#                  icon: mdi:folder-google-drive
#                  name: G-Del
          - type: horizontal-stack
            cards:
              - type: glance
                entities:
                  - entity: binary_sensor.j3455
                    name: j3455
                  - entity: binary_sensor.j3455_state
                    name: HA
                    icon: mdi:home-assistant
                  - entity: binary_sensor.j3455_automation
                    name: Auto
                    
                  - entity: binary_sensor.j3455_lead
                    name: Lead
                    
                  
              - type: glance
                entities:
                  - entity: binary_sensor.rpi
                    name: RPI
                  - entity: binary_sensor.rpi_state
                    name: HA
                    icon: mdi:home-assistant
                  - entity: binary_sensor.rpi_automation
                    name: Auto
                    
                  - entity: binary_sensor.rpi_lead
                    name: Lead

              
#          - type: vertical-stack
#            cards:
#              - type: horizontal-stack
#                cards:
#                  #- type: gauge
#                  #  name: Blocked
#                  #  entity: sensor.adguard_ads_percentage_blocked
#                  #  max: 50
#                  #  severity:
#                  #    green: 10
#                  #    yellow: 25
#                  #    red: 40
#                  - type: glance
#                    entities:
#                      - entity: sensor.adguard_dns_queries
#                        name: Queries
#                      - entity: sensor.adguard_ads_percentage_blocked
#                        name: Block
#                  - type: glance
#                    entities:
#                      - entity: binary_sensor.adguard_runnig
#                        name: Active
#                      - entity: binary_sensor.adguard_protection
#                        name: Protected
#                      - entity: binary_sensor.adguard_querylog
#                        name: Log
                  
                  
                  
                  
      # ############  
      # Right column
      ##############
      - type: vertical-stack
        cards:
            # ######################################
            # Load bars for 8 threads CPU (i7 3770s)
            # ######################################
          - type: custom:bar-card
            title_position: top
            #title: none
            columns: 3
            height: 20px
            min: 0
            max: 24.4
            target: 19
            severity:
              - value: 7
                color: '#40bf40'
              - value: 14
                color: '#bf9540'
              - value: 21
                color: '#bf4040'
              - value: 24 
                color: '#ff0000'
          #  severity:
          #    - value: 1
          #      hue: '120'
          #    - value: 3.2
          #      hue: '60'
          #    - value: 7
          #      hue: '0'
            #width: 50%
            padding: 2px
            direction: right
            entities:
              - sensor.load_1m
              - sensor.load_5m
              - sensor.load_15m
          
          - type: custom:vertical-stack-in-card
            cards:          
              - type: custom:bar-card
                title_position: top
                columns: 3
                height: 25px
                min: 20
                max: 100
                severity:
                  - value: 40
                    color: '#40bf40'
                  - value: 50
                    color: '#bf9540'
                  - value: 60
                    color: '#bf4040'
                  - value: 70
                    color: '#ff0000'
                padding: 2px
                direction: right
                entities:
                  - sensor.ipmi_cpu_temp
                  - sensor.ipmi_pch_temp
                  - sensor.ipmi_system_temp

              - type: glance
                #title: Ubuntu Status
                columns: 8
                entities:
                  - entity: sensor.ssd_usage
                    icon: mdi:chip
                    name: "/"
                  - entity: sensor.nvme_db_usage
                    icon: mdi:chip
                    name: DB
                  - entity: sensor.840pro_usage
                    icon: mdi:chip
                    name: 840ro
                  - entity: sensor.video_usage
                    icon: mdi:harddisk
                    name: V
                  - entity: sensor.media1_usage
                    icon: mdi:harddisk
                    name: M1
                  - entity: sensor.media2_usage
                    icon: mdi:harddisk
                    name: M2
                  - entity: sensor.back_2tb_usage
                    icon: mdi:harddisk
                    name: Back_2Tb
                  - entity: sensor.320l_usage
                    name: 320l


          - type: custom:vertical-stack-in-card
            cards:      
              - type: conditional
                conditions:
                  - entity: binary_sensor.ippon_hb_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 7
                  entities:
                    - entity: sensor.ippon_hb_status_data
                      name: 1050hb
                    - entity: sensor.ippon_hb_load
                      name: Load
                    - entity: sensor.ippon_hb_battery_runtime
                      name: Runtime
                    - entity: sensor.ippon_hb_battery_charge
                      name: Charge
                    - entity: sensor.ippon_hb_battery_voltage
                      name: Voltage
                    - entity: sensor.ippon_hb_input_voltage
                      name: Input
                    - entity: sensor.ippon_hb_output_voltage
                      name: Output
              - type: conditional
                conditions:
                  - entity: binary_sensor.ippon_mb_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 7
                  entities:
                    - entity: sensor.ippon_mb_status_data
                      name: 650mb
                    - entity: sensor.ippon_mb_load
                      name: Load
                    - entity: sensor.ippon_mb_battery_runtime
                      name: Runtime
                    - entity: sensor.ippon_mb_battery_charge
                      name: Charge
                    - entity: sensor.ippon_mb_battery_voltage
                      name: Voltage
                    - entity: sensor.ippon_mb_input_voltage
                      name: Input
                    - entity: sensor.ippon_mb_output_voltage
                      name: Output
          #- type: entities
          #  entities:
           #   - switch.blackhole
          - type: glance
            #title: Sytem Status
            columns: 7
            entities:
              - entity: switch.blackhole_turtle_mode
                name: Turtle
                icon: mdi:turtle
                tap_action:
                  action: toggle
              - entity: sensor.blackhole_status
                name: Status
              - entity: sensor.blackhole_down_speed
                name: DL
              - entity: sensor.blackhole_up_speed
                name: UL
              - entity: sensor.blackhole_total_torrents
                name: Total
              - entity: sensor.blackhole_active_torrents
                name: Active
              - entity: sensor.blackhole_completed_torrents
                name: Completed
              #- entity: sensor.blackhole_started_torrents
              #  name: Started      
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                cards:
                  - type: gauge
                    name: Ping
                    entity: sensor.speedtest_ping
                    max: 30
                    severity:
                      green: 10
                      yellow: 15
                      red: 20
                    tap_action:
                      action: call-service
                      service: script.speedtest_manual
                  - type: gauge
                    name: DL
                    entity: sensor.speedtest_download
                    max: 500
                    severity:
                      green: 400
                      yellow: 250
                      red: 50
                  - type: gauge
                    name: UL
                    entity: sensor.speedtest_upload
                    max: 500
                    severity:
                      green: 400
                      yellow: 250
                      red: 50
              - type: glance
                #title: Unifi Status
                columns: 7
                entities:
                  - entity: sensor.usg_alerts
                    name: Alert
                    #icon: mdi:memory
                  - entity: sensor.usg_lan
                    name: LAN
                  - entity: sensor.usg_wan
                    name: WAN
                  - entity: sensor.usg_wlan
                    name: WLAN
                  - entity: sensor.usg_www
                    name: WWW
                  - entity: group.unifi_devices
                    name: Devices
                  - entity: sensor.usg_vpn
                    name: VPN
################################################################
# System Health
################################################################
  - title: System Health
    icon: mdi:heart-pulse
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 5
            entities:
            - entity: sensor.ha_init
              name: HA Init
            - entity: sensor.ha_uptime
              name: HA Up
            - entity: sensor.host_uptime
              name: Host Up
              icon: mdi:clock-outline
            - entity: sensor.ha_installed_version
              name: Installed
            - entity: sensor.ha_latest_version
              name: Latest
              tap_action:
                action: call-service
                service: script.ha_released_update

          - type: glance
            columns: 5
            entities:
              - entity: sensor.nvme0_write_change_1h
                name: NVME0 1h
              - entity: sensor.nvme1_write_change_1h
                name: NVME1 1h
              - entity: sensor.nvme2_write_change_1h
                name: NVME2 1h
              - entity: sensor.boot_write_change_1h
                name: boot 1h
              - entity: sensor.840pro_write_change_1h
                name: 840pro 1h

          - type: custom:bar-card
            title_position: top
            #title: none
            columns: 3
            height: 20px
            min: 0
            max: 24.4
            target: 19
            severity:
              - value: 7
                color: '#40bf40'
              - value: 14
                color: '#bf9540'
              - value: 21
                color: '#bf4040'
              - value: 24 
                color: '#ff0000'
          #  severity:
          #    - value: 1
          #      hue: '120'
          #    - value: 3.2
          #      hue: '60'
          #    - value: 7
          #      hue: '0'
            #width: 50%
            padding: 2px
            direction: right
            entities:
              - sensor.load_1m
              - sensor.load_5m
              - sensor.load_15m
          
          - type: custom:vertical-stack-in-card
            cards:          
              - type: custom:bar-card
                title_position: top
                columns: 3
                height: 25px
                min: 20
                max: 100
                severity:
                  - value: 40
                    color: '#40bf40'
                  - value: 50
                    color: '#bf9540'
                  - value: 60
                    color: '#bf4040'
                  - value: 70
                    color: '#ff0000'
                padding: 2px
                direction: right
                entities:
                  - sensor.ipmi_cpu_temp
                  - sensor.ipmi_pch_temp
                  - sensor.ipmi_system_temp
              - type: custom:bar-card
                title_position: top
                columns: 4
                height: 25px
                min: 20
                max: 100
                severity:
                  - value: 40
                    color: '#40bf40'
                  - value: 50
                    color: '#bf9540'
                  - value: 60
                    color: '#bf4040'
                  - value: 70
                    color: '#ff0000'
                padding: 2px
                direction: right
                entities:
                  - sensor.ipmi_peripheral_temp
                  - sensor.ipmi_vcpuvrm_temp
                  - sensor.ipmi_vmemabvrm_temp
                  - sensor.ipmi_vmemcdvrm_temp
              - type: custom:bar-card
                title_position: top
                columns: 4
                height: 25px
                min: 20
                max: 100
                severity:
                  - value: 40
                    color: '#40bf40'
                  - value: 50
                    color: '#bf9540'
                  - value: 60
                    color: '#bf4040'
                  - value: 70
                    color: '#ff0000'
                padding: 2px
                direction: right
                entities:
                  - sensor.ipmi_dimma1_temp
                  - sensor.ipmi_dimmb1_temp
                  - sensor.ipmi_dimmc1_temp
                  - sensor.ipmi_dimmd1_temp

              - type: glance
                #title: Ubuntu Status
                columns: 6
                entities:
                  - entity: sensor.cpu_speed
                    name: Speed
                  - entity: sensor.cpu_usage
                    name: CPU
                  - entity: sensor.ram_usage
                    name: RAM
                    icon: mdi:chip

                  - entity: sensor.db_size
                    name: DB
                    icon: mdi:database
                  - entity: switch.server_plug_hb
                    name: S.Plug
                  - entity: sensor.server_z_hb
                    name: Power usage
              - type: custom:bar-card
                title_position: top
                columns: 1
                height: 25px
                min: 200
                max: 1700
                severity:
                  #- value: 
                  #  color: '#40bf40'
                  - value: 500
                    color: '#4040bf'
                  - value: 1500
                    color: '#40bf40'
                  - value: 3500
                    color: '#bf4040'
                padding: 2px
                direction: right
                entities:
                  - entity: sensor.ipmi_fan1
                    name: CPU FAN
              - type: glance
                columns: 6
                entities:
                  - entity: sensor.ipmi_fan1
                    name: FAN1
                  - entity: sensor.ipmi_fan2
                    name: FAN2
                  - entity: sensor.ipmi_fan3
                    name: FAN3
                  - entity: sensor.ipmi_fan4
                    name: FAN4
                  - entity: sensor.ipmi_fan5
                    name: FAN5
                  - entity: sensor.ipmi_fana
                    name: FANA
          # - type: glance
          #   columns: 3
          #   entities:
          #     - entity: sensor.sdp_session_write
          #       name: sdp Per Session
          #     - entity: sensor.sdp_gb_per_day
          #       name: Per Day
          #     - entity: sensor.sdp_gb_per_hour
          #       name: Per Hour
          #     - entity: sensor.sdq_session_write
          #       name: sdq Per Session
          #     - entity: sensor.sdq_gb_per_day
          #       name: Per Day
          #     - entity: sensor.sdq_gb_per_hour
          #       name: Per Hour
          #     - entity: sensor.sdr_session_write
          #       name: sdr Per Session
          #     - entity: sensor.sdr_gb_per_day
          #       name: Per Day
          #     - entity: sensor.sdr_gb_per_hour
          #       name: Per Hour
          #     - entity: sensor.sds_session_write
          #       name: sds Per Session
          #     - entity: sensor.sds_gb_per_day
          #       name: Per Day
          #     - entity: sensor.sds_gb_per_hour
          #       name: Per Hour

      - type: vertical-stack
        cards:
          - type: glance
            columns: 4
            entities:
              - entity: sensor.md0_status
                name: md0
              - sensor.md0_disk1_template
              - sensor.md0_disk2_template
              - entity: sensor.md1_status
                name: md1
          - type: glance
            columns: 6
            entities:
              # NVME 0
              - entity: sensor.nvme0_tb_written
                name: nvme0
                icon: mdi:raspberry-pi
              - entity: sensor.nvme0_session_read
                name: R Session
              - entity: sensor.nvme0_session_write
                name: W Session
              - entity: sensor.nvme0_gb_per_day
                name: Per Day
              - entity: sensor.nvme0_gb_per_hour
                name: Per Hour
              - entity: sensor.nvme0_life_left
                name: Left
              # NVME 1
              - entity: sensor.nvme1_tb_written
                name: nvme1
                icon: mdi:raspberry-pi
              - entity: sensor.nvme1_session_read
                name: R Session
              - entity: sensor.nvme1_session_write
                name: W Session
              - entity: sensor.nvme1_gb_per_day
                name: Per Day
              - entity: sensor.nvme1_gb_per_hour
                name: Per Hour
              - entity: sensor.nvme1_life_left
                name: Left
              # NVME 2
              - entity: sensor.nvme2_tb_written
                name: nvme2
                icon: mdi:raspberry-pi
              - entity: sensor.nvme2_session_read
                name: R Session
              - entity: sensor.nvme2_session_write
                name: W Session
              - entity: sensor.nvme2_gb_per_day
                name: Per Day
              - entity: sensor.nvme2_gb_per_hour
                name: Per Hour
              - entity: sensor.nvme2_life_left
                name: Left
              # boot
              - entity: sensor.boot_tb_written
                name: boot
                icon: mdi:raspberry-pi
              - entity: sensor.boot_session_read
                name: R Session
              - entity: sensor.boot_session_write
                name: W Session
              - entity: sensor.boot_gb_per_day
                name: Per Day
              - entity: sensor.boot_gb_per_hour
                name: Per Hour
              - entity: sensor.boot_life_left
                name: Left
              # 840pro
              - entity: sensor.840pro_tb_written
                name: 840pro
                icon: mdi:raspberry-pi
              - entity: sensor.840pro_session_read
                name: R Session
              - entity: sensor.840pro_session_write
                name: W Session
              - entity: sensor.840pro_gb_per_day
                name: Per Day
              - entity: sensor.840pro_gb_per_hour
                name: Per Hour
              - entity: sensor.840pro_life_left
                name: Left

          - type: glance
            columns: 4
            entities:
              - entity: sensor.md0_session_read
                name: md0 R
              - entity: sensor.md0_session_write
                name: md0 W
              #- entity: sensor.md2_session_read
              #  name: md2 R
              # - entity: sensor.md3_session_read
              #   name: md3 R
              # - entity: sensor.md4_session_read
              #   name: md4 R
              # - entity: sensor.md5_session_read
              #   name: md5 R
              - entity: sensor.md1_session_read
                name: md1 R
              - entity: sensor.md1_session_write
                name: md1 W
              #- entity: sensor.md2_session_write
              #  name: md2 W
              # - entity: sensor.md3_session_write
              #   name: md3 W
              # - entity: sensor.md4_session_write
              #   name: md4 W
              # - entity: sensor.md5_session_write
              #   name: md5 W

      - type: vertical-stack
        cards:
          - type: glance
            columns: 5
            entities:
              # nvme0
              - entity: sensor.nvme0_temp
                name: NVME0
              # - entity: sensor.nvme0_session_read
              #   name: Read
              # - entity: sensor.nvme0_session_write
              #   name: Write
              # nvme1
              
              - entity: sensor.nvme1_temp
                name: NVME1
              # - entity: sensor.nvme1_session_read
              #   name: Read
              # - entity: sensor.nvme1_session_write
              #   name: Write
              # nvme2
              - entity: sensor.nvme2_temp
                name: NVME2
              # - entity: sensor.nvme2_session_read
              #   name: Read
              # - entity: sensor.nvme2_session_write
              #   name: Write

              # boot
              - entity: sensor.boot_temp
                name: boot
              # - entity: sensor.sda_session_read
              #   name: Read
              # - entity: sensor.sda_session_write
              #   name: Write
              # 840pro
              - entity: sensor.840pro_temp
                name: 840pro
              # - entity: sensor.sdb_session_read
              #   name: Read
              # - entity: sensor.sdb_session_write
              #   name: Write
          - type: glance
            columns: 4
            entities:    
              # sdc
              - entity: sensor.media1_temp
                name: Media1
              # - entity: sensor.sdc_session_read
              #   name: Read
              # - entity: sensor.sdc_session_write
              #   name: Write
              # sdd
              - entity: sensor.media2_temp
                name: Media2
              # - entity: sensor.sdd_session_read
              #   name: Read
              # - entity: sensor.sdd_session_write
              #   name: Write
                
              # sde
              - entity: sensor.video_temp
                name: Video
              # - entity: sensor.sde_session_read
              #   name: Read
              # - entity: sensor.sde_session_write
              #   name: Write
              # sdm
              - entity: sensor.sdi_temp
                name: Temp
              # - entity: sensor.video_session_read
              #   name: Read
              # - entity: sensor.video_session_write
              #   name: Write
          - type: glance
            columns: 4
            entities:
              # sdf
              - entity: sensor.sda_temp
                name: sda
              # - entity: sensor.sdf_session_read
              #   name: Read
              # - entity: sensor.sdf_session_write
              #   name: Write
              # sdg
              - entity: sensor.sdb_temp
                name: sdb
              # - entity: sensor.sdg_session_read
              #   name: Read
              # - entity: sensor.sdg_session_write
              #   name: Write
              # sdh
              - entity: sensor.sdc_temp
                name: sdc
              # - entity: sensor.sdh_session_read
              #   name: Read
              # - entity: sensor.sdh_session_write
              #   name: Write
              # sdi
              - entity: sensor.sdd_temp
                name: sdd
              # - entity: sensor.sdi_session_read
              #   name: Read
              # - entity: sensor.sdi_session_write
              #   name: Write
              # sdj
              - entity: sensor.sdf_temp
                name: sdf
              # - entity: sensor.sdj_session_read
              #   name: Read
              # - entity: sensor.sdj_session_write
              #   name: Write
              # sdk
              - entity: sensor.sdg_temp
                name: sdg
              # - entity: sensor.sdk_session_read
              #   name: Read
              # - entity: sensor.sdk_session_write
              #   name: Write
              # sdl
              - entity: sensor.sdh_temp
                name: sdh
              # - entity: sensor.sdl_session_read
              #   name: Read
              # - entity: sensor.sdl_session_write
              #   name: Write

          # - type: glance
          #   columns: 3
          #   entities:
          #     - entity: sensor.sdc_temp
          #       name: sdc
          #     - entity: sensor.sdd_temp
          #       name: sdd
          #     - entity: sensor.sde_temp
          #       name: sde
          #     - entity: sensor.sdf_temp
          #       name: sdf
          #     - entity: sensor.sdg_temp
          #       name: sdg
          #     - entity: sensor.sdh_temp
          #       name: sdh
          #     - entity: sensor.sdi_temp
          #       name: sdi
          #     - entity: sensor.sdj_temp
          #       name: sdj
          #     - entity: sensor.sdk_temp
          #       name: sdk
          #     - entity: sensor.sdl_temp
          #       name: sdl
          #     - entity: sensor.sdm_temp
          #       name: sdm

################################################################
# radio
################################################################
  - title: Radio
    icon: mdi:radio
    cards:
      - type: vertical-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: entities
                entities:
                  #- group.my_radio
                  - input_select.radio_station
                  - input_select.chromecast_radio
                  - input_number.volume_radio
              - type: horizontal-stack
                cards:
                  - type: entity-button
                    name: Play
                    icon: mdi:play
                    entity: script.radio_on
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.radio_on
                  - type: entity-button
                    name: Stop
                    icon: mdi:stop
                    entity: script.radio_off
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.radio_off
          - type: glance
            columns: 6
            entities:
              - entity: media_player.home_mini_v
                name: V
              - entity: media_player.home_mini_s
                name: S
              - entity: media_player.home_mini_k
                name: K
              - entity: media_player.home_mini_mb
                name: MB
              - entity: media_player.home_mini_hb
                name: HB
              - entity: media_player.mpd
                name: MPD

################################################################
# pressure monitoring
################################################################
  - title: Pressure monitoring
    icon: mdi:thermostat
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 6
            entities:
              - entity: binary_sensor.pressure_rising_fast
                name: U Fast
              - entity: binary_sensor.pressure_rising_slow
                name: U Slow
              - entity: binary_sensor.pressure_falling_fast
                name: D Fast
              - entity: binary_sensor.pressure_falling_slow
                name: D Slow
              - entity: binary_sensor.temp_rising
                name: T Up
              - entity: binary_sensor.temp_falling
                name: T Down
          - type: history-graph
            hours_to_show: 72
            entities:
              - sensor.pressure_158d000233fb72
              - sensor.8266_air_valve_pressure
          - type: history-graph
            hours_to_show: 72
            entities:
              - sensor.pressure_gradient
              - sensor.pressure_gradient_air_valve
      - type: vertical-stack
        cards:
          - type: gauge
            name: Gradient
            entity: sensor.pressure_gradient
            max: 250
            min: -250
            severity:
              blue: -250
              green: 0
              yellow: 250
          - type: custom:mini-graph-card
            entities:
              - sensor.pressure_gradient
            hours_to_show: 48
            points_per_hour: 10
            decimals: 0
            hour24: true
            extrema: true
            labels: true
            line_width: 1
            line_color: blue
            upper_bound: 250
            lower_bound: -250
      - type: vertical-stack
        cards:
          - type: gauge
            name: Gradient
            entity: sensor.pressure_gradient_air_valve
            max: 250
            min: -250
            severity:
              blue: -100
              green: 0
              yellow: 100
          
          - type: custom:mini-graph-card
            entities:
              - sensor.pressure_gradient_air_valve
            hours_to_show: 48
            points_per_hour: 10
            decimals: 0
            hour24: true
            extrema: true
            labels: true
            line_width: 1
            line_color: black
            upper_bound: 250
            lower_bound: -250
################################################################
# MQTT Cross Servers Sensors PAGE
################################################################
  - title: Telemetry
    icon: mdi:desktop-mac-dashboard
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: Main
            entities:
              - sensor.ubuntu_telemetry_last_update
              - sensor.ubuntu_uptime
              - sensor.cpu_package_temp
              - sensor.cpu_usage
              - sensor.ram_usage
              - sensor.ssd_usage
              - type: divider
              - sensor.ipmi_cpu_temp
              - sensor.ipmi_pch_temp
              - sensor.ipmi_peripheral_temp
              - sensor.ipmi_system_temp
              - sensor.ipmi_vcpuvrm_temp
              - sensor.ipmi_vmemabvrm_temp
              - sensor.ipmi_vmemcdvrm_temp
              # - sensor.media_usage
              # - sensor.video_usage
              # - sensor.back_2tb_usage
          - type: entities
            show_header_toggle: false
            title: RPI
            entities:
              - sensor.rpi_telemetry_last_update
              - sensor.rpi_uptime
              - sensor.rpi_cpu_temp
              - sensor.rpi_cpu_usage
              - sensor.rpi_ram_usage
              - sensor.rpi_ssd_usage
              - sensor.rpi_ssd_total_lba_written
              - sensor.rpi_ssd_session_write
              - sensor.rpi_sda_gb_per_hour
              - sensor.rpi_sda_gb_per_day
              - sensor.rpi_sda_life_left
          - type: entities
            show_header_toggle: false
            title: j3455
            entities:
              - sensor.j3455_telemetry_last_update
              - sensor.j3455_uptime
              - sensor.j3455_cpu_temp
              - sensor.j3455_cpu_usage
              - sensor.j3455_ram_usage
              - sensor.j3455_ssd_usage
              - sensor.j3455_ssd_total_lba_written
              - sensor.j3455_ssd_session_write
              - sensor.j3455_sda_gb_per_hour
              - sensor.j3455_sda_gb_per_day
              - sensor.j3455_sda_life_left
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: m6800
            entities:
              - sensor.m6800_telemetry_last_update
              - sensor.m6800_uptime
              - sensor.m6800_cpu_temperature
              - sensor.m6800_cpu_load
              - sensor.m6800_memory_usage
              - sensor.m6800_drive_c_temperature
              - sensor.m6800_drive_c_usage
              - sensor.m6800_860pro_calc_life_left
              - sensor.m6800_drive_d_temperature
              - sensor.m6800_drive_d_usage
              - sensor.m6800_drive_e_temperature
              - sensor.m6800_drive_e_usage
              - sensor.m6800_drive_f_temperature
              - sensor.m6800_drive_f_usage
              - sensor.m6800_840evo_calc_life_left
          - type: entities
            show_header_toggle: false
            title: 5490
            entities:
              - sensor.5490_telemetry_last_update
              - sensor.5490_uptime
              # - sensor.5490_cpu_temperature
              # - sensor.5490_cpu_load
              # - sensor.5490_memory_usage
              # - sensor.5490_sc401_temperature
              # - sensor.5490_sc401_usage
              # - sensor.5490_sc401_calc_life_left
          - type: entities
            show_header_toggle: false
            title: R418
            entities:
              - sensor.r418_telemetry_last_update
              - sensor.r418_uptime
              - sensor.r418_cpu_temperature
              - sensor.r418_cpu_load
              - sensor.r418_memory_usage
              - sensor.r418_ssd_usage
              - sensor.r418_sata_ssd_calc_life_left

      - type: vertical-stack
        cards:          
          - type: entities
            show_header_toggle: false
            title: i5
            entities:
              - sensor.i5_telemetry_last_update
              - sensor.i5_uptime
              - sensor.i5_cpu_temperature
              - sensor.i5_cpu_load
              - sensor.i5_cpu_fan 
              - sensor.i5_memory_usage
              - sensor.i5_ssd_temperature
              - sensor.i5_ssd_usage
              - sensor.i5_bx500_calc_life_left
              - sensor.i5_case_fan
          - type: entities
            show_header_toggle: false
            title: u430p
            entities:
              - sensor.u430p_telemetry_last_update
              - sensor.u430p_uptime
              - sensor.u430p_cpu_temperature
              - sensor.u430p_cpu_load
              - sensor.u430p_memory_usage
              - sensor.u430p_ssd_temperature
              - sensor.u430p_ssd_usage
              - sensor.u430p_840pro_calc_life_left
              - sensor.u430p_m2_usage
              - sensor.u430p_sc2_m2_calc_life_left

          - type: entities
            show_header_toggle: false
            title: BRIX
            entities:
              - sensor.brix_telemetry_last_update
              - sensor.brix_uptime
              - sensor.brix_cpu_temperature
              - sensor.brix_cpu_load
              - sensor.brix_memory_usage
              - sensor.brix_cpu_fan
              - sensor.brix_ssd_temperature
              - sensor.brix_ssd_usage
              - sensor.brix_860evo_calc_life_left
              - sensor.brix_aux_temperature

################################################################
# ESP States
################################################################
  - title: ESPs
    icon: mdi:car-esp
    cards:
      - type: entities
        title: ESPs State
        show_header_toggle: false
        entities:
          - binary_sensor.8266_air_valve_status
          - binary_sensor.8266_pwr_status
          - binary_sensor.d1_filter_flow_status
          - binary_sensor.d1_hood_status
          - binary_sensor.d1mini_co2_mb_status
          - binary_sensor.d1mini_co2_s_status
          - binary_sensor.d1mini_co2_v_status
          - binary_sensor.esp01_hdd_box_status
          - binary_sensor.esp32_domofon_status
          - binary_sensor.esp32_kitchen_status
      - type: entities
        title: WiFi
        show_header_toggle: false
        entities:
          - sensor.8266_air_valve_wifi_rssi
          - sensor.8266_pwr_wifi_rssi
          - sensor.d1_filter_flow_wifi_rssi
          - sensor.d1_hood_wifi_rssi
          - sensor.d1mini_co2_mb_wifi_rssi
          - sensor.d1mini_co2_s_wifi_rssi
          - sensor.d1mini_co2_v_wifi_rssi
          - sensor.esp01_hdd_box_wifi_rssi
          - sensor.esp32_domofon_wifi_rssi
          - sensor.esp32_kitchen_wifi_rssi
      - type: entities
        title: Uptime
        show_header_toggle: false
        entities:
          - sensor.8266_air_valve_uptime
          - sensor.8266_pwr_uptime
          - sensor.d1_filter_flow_uptime
          - sensor.d1_hood_uptime
          - sensor.d1mini_co2_mb_uptime
          - sensor.d1mini_co2_s_uptime
          - sensor.d1mini_co2_v_uptime
          - sensor.esp01_hdd_box_uptime
          - sensor.esp32_domofon_uptime
          - sensor.esp32_kitchen_uptime

################################################################
# Devices States
################################################################
  - title: Devices
    icon: mdi:timer-sand
    cards:
      # - type: entities
      #   title: Current
      #   show_header_toggle: false
      #   entities:
      #     - device_tracker.brix3455_lan
      #     - device_tracker.i5
      #     - device_tracker.m6800_wifi
      #     - device_tracker.r418_wifi
      #     - device_tracker.u430p_wifi
      #     - type: divider
      #     - sensor.kettle_on
      #     - sensor.washer_on
      #     - type: divider
      #     - light.led_strip_hb
      #     - light.round_led_mb
      #     - light.square_led_v
      #     - type: divider
      #     - sensor.tv_k_on
      #     - sensor.tv_box_on
      #     - binary_sensor.tv_v
      #     - sensor.iconbit_on
      - type: entities
        title: Daily
        show_header_toggle: false
        entities:
          - sensor.brix_on
          - sensor.i5_on
          - sensor.m6800_on
          - sensor.r418_on
          - sensor.u430p_on
          - type: divider
          - sensor.kettle_on
          - sensor.washer_on
          - type: divider
          - sensor.led_strip_hb_on
          - sensor.round_led_mb_on
          - sensor.square_led_v_on
          - type: divider
          - sensor.tv_k_on
          - sensor.tv_box_on
          - sensor.tv_v_on
          - sensor.iconbit_on

      - type: entities
        title: Monthly
        show_header_toggle: false
        entities:
          - sensor.brix_on_monthly
          - sensor.i5_on_monthly
          - sensor.m6800_on_monthly
          - sensor.r418_on_monthly
          - sensor.u430p_on_monthly
          - type: divider
          - sensor.kettle_on_monthly
          - sensor.washer_on_monthly
          - type: divider
          - sensor.led_strip_hb_on_monthly
          - sensor.round_led_mb_on_monthly
          - sensor.square_led_v_on_monthly
          - type: divider
          - sensor.tv_k_on_monthly
          - sensor.tv_box_on_monthly
          - sensor.tv_v_on_monthly
          - sensor.iconbit_on_monthly
 
################################################################
# Utility SENSORS
################################################################
  - title: Utility Sensors
    icon: mdi:shape
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: Main
            show_header_toggle: false
            entities:
              - entity: sensor.power_t1
              - entity: sensor.power_t2
              - entity: sensor.power_consumption_month_t1
              - entity: sensor.power_consumption_month_t2
              - entity: sensor.cold_water_meter
              - entity: sensor.hot_water_meter
              - entity: sensor.cold_water_month
              - entity: sensor.hot_water_month
          - type: glance
            entities:
              - entity: script.utility_value_from_j3455
                name: j3455 -> Main
                icon: mdi:desktop-tower
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.utility_value_from_j3455
              - entity: script.utility_value_from_rpi
                name: RPI -> Main
                icon: mdi:raspberry-pi
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.utility_value_from_rpi
      - type: vertical-stack
        cards:
          - type: entities
            title: j3455
            show_header_toggle: false
            entities:
              - entity: sensor.power_t1_j3455
                name: Power meter/T1
              - entity: sensor.power_t2_j3455
                name: Power meter/T2
              - entity: sensor.power_consumption_month_t1_j3455
                name: Power/Month/T1
              - entity: sensor.power_consumption_month_t2_j3455
                name: Power/Month/T2
              - entity: sensor.cold_water_meter_j3455
                name: 'Cold water meter'
              - entity: sensor.hot_water_meter_j3455
                name: 'Hot water meter'
              - entity: sensor.cold_water_meter_month_j3455
                name: 'Cold water/Month'
              - entity: sensor.hot_water_meter_month_j3455
                name: 'Hot water/Month'
          - type: glance
            entities:
              - entity: input_boolean.j3455_set_utility
                name: Main -> j3455
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.j3455_set_utility
              - entity: binary_sensor.j3455_state
                name: j3455 Server State
      - type: vertical-stack
        cards:
          - type: entities
            title: RPI
            show_header_toggle: false
            entities:
              - entity: sensor.power_t1_rpi
                name: Power meter/T1
              - entity: sensor.power_t2_rpi
                name: Power meter/T2
              - entity: sensor.power_consumption_month_t1_rpi
                name: Power/Month/T1
              - entity: sensor.power_consumption_month_t2_rpi
                name: Power/Month/T2
              - entity: sensor.cold_water_meter_rpi
                name: 'Cold water meter'
              - entity: sensor.hot_water_meter_rpi
                name: 'Hot water meter'
              - entity: sensor.cold_water_meter_month_rpi
                name: 'Cold water/Month'
              - entity: sensor.hot_water_meter_month_rpi
                name: 'Hot water/Month'
          - type: glance
            entities:
              - entity: input_boolean.rpi_set_utility
                name: Main -> RPI
                tap_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.rpi_set_utility
              - entity: binary_sensor.rpi_state
                name: RPI Server State